---
import Navlink from "./Navlink.astro";
import NavlinkMobile from "./NavlinkMobile.astro";

interface Item {
  title: string;
  href: string;
  isActive?: boolean;
}

interface Props {
  backgroundColor?: string;
  textColor?: string;
  items: Item[];
}

const { backgroundColor = "black", textColor = "white", items } = Astro.props;
---

<nav
  id="desktop-menu"
  class="absolute lg:h-20 w-full z-50"
  style={`background-color: ${backgroundColor}`}
>
  <div
    class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"
    data-sal="slide-down"
    data-sal-duration="1000"
  >
    <div class="relative flex h-20 items-center justify-between">
      <h1
        class="font-display text-xl md:text-2xl flex-1 text-left select-none whitespace-nowrap"
        style={`color: ${textColor}`}
      >
        <a href="/">Institut 4000</a>
      </h1>
      <div class="lg:hidden flex flex-1 justify-end items-center space-x-2">
        <button class="text-white" onclick="toggleMenu()">Menu</button>
        <button
          type="button"
          aria-label="Toggle main menu"
          class="h-7 w-7 flex items-center justify-center"
          style={`color: ${textColor}`}
          onclick="toggleMenu()"
          id="menu-button"
        >
          <span class="sr-only">Open main menu</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-10 h-10"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M3.75 9h16.5m-16.5 6.75h16.5"></path>
          </svg>
        </button>
      </div>
      <div
        class="space-x-10 hidden lg:flex flex-1 justify-center whitespace-nowrap"
      >
        {
          items.map((item) => (
            <Navlink
              isActive={item.isActive}
              href={item.href}
              textColor={textColor}
            >
              {item.title}
            </Navlink>
          ))
        }
      </div>
      <div
        class="hidden lg:flex space-x-5 flex-1 justify-end"
        style={`color: ${textColor}`}
      >
        <a href="https://poly.me/institut4000" target="_blank">
          <span class="sr-only">Polywork</span>
          <svg
            role="img"
            viewBox="0 0 24 24"
            class="h-6 w-6 sm:w-5 sm:h-5"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            ><title>Polywork</title><path
              d="M19.125 0H4.875A4.865 4.865 0 0 0 0 4.875v14.25C0 21.825 2.175 24 4.875 24h6.6c2.7 0 4.875-2.175 4.875-4.875V16.65h2.775c2.7 0 4.875-2.175 4.875-4.875v-6.9C24 2.175 21.825 0 19.125 0zM16.5 1.275h2.625a3.6 3.6 0 0 1 3.6 3.6v2.7H16.5v-6.3zM15.075 9v6.45H8.85V9h6.225zM8.85 1.2h6.225v6.375H8.85V1.2zM1.275 4.8a3.6 3.6 0 0 1 3.6-3.6H7.5v6.375H1.275V4.8zM7.5 9v6.45H1.2V9h6.3zm0 13.725H4.8a3.6 3.6 0 0 1-3.6-3.6V16.8h6.3v5.925zm7.575-3.525a3.6 3.6 0 0 1-3.6 3.6H8.85v-5.925h6.225V19.2zm7.65-7.35a3.6 3.6 0 0 1-3.6 3.6H16.5V9h6.225v2.85z"
            ></path>
          </svg>
        </a>
        <a
          href="https://linkedin.com/in/niels-legolas-clormann"
          target={"_blank"}
        >
          <span class="sr-only">LinkedIn</span>
          <svg
            role="img"
            viewBox="0 0 24 24"
            class="h-6 w-6 sm:w-5 sm:h-5"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            ><title>LinkedIn</title><path
              d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
            ></path>
          </svg>
        </a>
        <a href="https://github.com/flixoflax" target={"_blank"}>
          <span class="sr-only">Github</span>
          <svg
            role="img"
            viewBox="0 0 24 24"
            class="h-6 w-6 sm:w-5 sm:h-5"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            ><title>GitHub</title><path
              d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"
            ></path>
          </svg>
        </a>
      </div>
    </div>
  </div>

  <div class="lg:hidden hidden" id="mobile-menu" style={`color: ${textColor}`}>
    <div class="p-4 pt-10">
      <div class="flex flex-col space-y-8 items-start">
        {
          items.map((item) => (
            <NavlinkMobile
              href={item.href}
              isActive={item.isActive}
              textColor={textColor}
            >
              {item.title}
            </NavlinkMobile>
          ))
        }
      </div>
      <div class="flex space-x-5 flex-1 justify-start mt-20">
        <a href="https://poly.me/institut4000" target="_blank">
          <span class="sr-only">Polywork</span>
          <svg
            role="img"
            viewBox="0 0 24 24"
            class="w-8 h-8"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            ><title>Polywork</title><path
              d="M19.125 0H4.875A4.865 4.865 0 0 0 0 4.875v14.25C0 21.825 2.175 24 4.875 24h6.6c2.7 0 4.875-2.175 4.875-4.875V16.65h2.775c2.7 0 4.875-2.175 4.875-4.875v-6.9C24 2.175 21.825 0 19.125 0zM16.5 1.275h2.625a3.6 3.6 0 0 1 3.6 3.6v2.7H16.5v-6.3zM15.075 9v6.45H8.85V9h6.225zM8.85 1.2h6.225v6.375H8.85V1.2zM1.275 4.8a3.6 3.6 0 0 1 3.6-3.6H7.5v6.375H1.275V4.8zM7.5 9v6.45H1.2V9h6.3zm0 13.725H4.8a3.6 3.6 0 0 1-3.6-3.6V16.8h6.3v5.925zm7.575-3.525a3.6 3.6 0 0 1-3.6 3.6H8.85v-5.925h6.225V19.2zm7.65-7.35a3.6 3.6 0 0 1-3.6 3.6H16.5V9h6.225v2.85z"
            ></path>
          </svg>
        </a>
        <a
          href="https://linkedin.com/in/niels-legolas-clormann"
          target={"_blank"}
        >
          <span class="sr-only">LinkedIn</span>
          <svg
            role="img"
            viewBox="0 0 24 24"
            class="w-8 h-8"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            ><title>LinkedIn</title><path
              d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
            ></path>
          </svg>
        </a>
        <a href="https://github.com/flixoflax" target={"_blank"}>
          <span class="sr-only">Github</span>
          <svg
            role="img"
            viewBox="0 0 24 24"
            class="w-8 h-8"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            ><title>GitHub</title><path
              d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"
            ></path>
          </svg>
        </a>
      </div>
    </div>
  </div>
</nav>
<div class="pb-16"></div>

<script is:inline>
  const navEl = document.getElementById("desktop-menu");
  const mobileNavEl = document.getElementById("mobile-menu");
  const buttonEl = document.getElementById("menu-button");

  let menuOpen = false;

  const toggleMenu = () => {
    if (!menuOpen) {
      openMenu();
    } else {
      closeMenu();
    }
    menuOpen = !menuOpen;
  };

  const openMenu = () => {
    // Open Menu
    navEl.classList.add("h-screen", "fixed");
    navEl.classList.remove("absolute");
    mobileNavEl.classList.remove("hidden");

    // Update MenuButton
    buttonEl.innerHTML =
      '<span class="sr-only">Close main menu</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>';
  };

  const closeMenu = () => {
    navEl.classList.remove("h-screen", "fixed");
    navEl.classList.add("absolute");
    mobileNavEl.classList.add("hidden");

    // Update MenuButton
    buttonEl.innerHTML =
      '<span class="sr-only">Open main menu</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9h16.5m-16.5 6.75h16.5" /></svg>';
  };
</script>
